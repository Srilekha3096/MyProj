"use strict";(self.webpackChunkjumbo_react_6_x=self.webpackChunkjumbo_react_6_x||[]).push([[780],{12780:(e,a,t)=>{t.r(a),t.d(a,{default:()=>j});var o=t(1413),l=t(46170),s=t(20890),n=t(61889),r=t(40131),i=t(64280),c=t(72791),d=t(89484),u=t(72426),h=t.n(u),p=t(20560),v=t(74569),m=t.n(v);const Y={color:"#00b4d8"},f={display:"flex !important",alignItems:"center"};var x=t(3787),g=t(80184);const j=function(){const e=localStorage.getItem("accesstoken"),a=localStorage.getItem("OrganizationId"),t={headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json",Accept:"application/json"}};let u=new Date,v=u.getDate(),j=u.getMonth()+1,D=u.getFullYear(),M="".concat(D,"-").concat(j<10?"0"+j:j,"-").concat(v),y=h()().startOf("year"),Z=h()().endOf("year"),b=null===y||void 0===y?void 0:y.format("YYYY-MM-DD"),O=null===Z||void 0===Z?void 0:Z.format("YYYY-MM-DD");const[N,S]=(0,c.useState)(!1),[C,P]=(0,c.useState)(b),[k,T]=(0,c.useState)(""),[A,w]=(0,c.useState)(""),[q,B]=(0,c.useState)(""),[I,_]=(0,c.useState)(0),[E,L]=(0,c.useState)("All"),[F,V]=(0,c.useState)("This Year"),[W,z]=(0,c.useState)(O),[Q,R]=(0,c.useState)([]),[U,G]=(0,c.useState)([]),[H,J]=(0,c.useState)([]),[K,X]=(0,c.useState)([]),[$,ee]=(0,c.useState)(""),[ae,te]=(0,c.useState)(""),oe=()=>h()().startOf("year").format("YYYY-MM-DD"),le=()=>h()().endOf("year").format("YYYY-MM-DD");var se;return(0,c.useEffect)((()=>{(async()=>{if("All"===E||""===E)try{let e={Company_Id:a,Date:[C||k||oe(),A||W||le()]};console.log("payload",e),await m().post("".concat(p._n,"/Erpapp/Vendoranalysis/"),e,t).then((e=>{var a;console.log("All --- > vendorressss choose period",e.data);let t=[];null===e||void 0===e||null===(a=e.data)||void 0===a||a.map((e=>{let a=Object.keys(e)[0],o=e[a];t.push({label:a,value:o||0})})),G(t)})).catch((e=>{console.log("failed to fetch data",e)}))}catch(e){console.log("failed to fetch data",e)}else try{let e={Region:E,Partner_Name:q,City:ae,State:$,Date:[C||k||oe(),A||W||le()]};console.log("payload",e),await m().post("".concat(p._n,"/Erpapp/BUVendoranalysis/"),e,t).then((e=>{var a;console.log("particullar --- > vendorressss choose period",e.data);let t=[];null===e||void 0===e||null===(a=e.data)||void 0===a||a.map((e=>{let a=Object.keys(e)[0],o=e[a];t.push({label:a,value:o||0})})),G(t)})).catch((e=>{console.log("failed to fetch data",e)}))}catch(e){console.log("failed to fetch data",e)}})()}),[C,W,k,A,E,$,ae,q]),(0,c.useEffect)((()=>{(async()=>{try{await m().get("".concat(p._n,"/Erpapp/Partnerlist/"),{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json",Accept:"application/json"}}).then((e=>{var a;const t=null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.results;R(t)}))}catch(a){console.log("failed to fecth",a)}})()}),[]),console.log("conditions",(se=U,console.log("condition 1",E,!Boolean(F)),Boolean(E)&&(Boolean("All"==E)&&Boolean(F)||Boolean("All"!=E)&&Boolean(F)&&Boolean(q)&&Boolean($)&&Boolean(ae))?se:[])),(0,g.jsxs)(l.Z,{children:[(0,g.jsx)(s.Z,{variant:"h1",sx:{fontWeight:800,mt:-2,mb:.5},children:"Analytics"}),(0,g.jsx)(s.Z,{sx:{fontSize:"15px",color:Y.color,fontWeight:500,mt:1},children:"Vendor Analysis"}),(0,g.jsxs)(n.ZP,{container:!0,columnSpacing:2,xs:12,sx:{mt:2},children:[(0,g.jsxs)(n.ZP,{item:!0,xs:12,md:3.5,lg:3,children:[(0,g.jsxs)(s.Z,{className:"col-12 input-label",children:["Select Region ",(0,g.jsx)("span",{className:"required",children:"*"})]}),(0,g.jsx)(r.Z,{className:"search-select col-12",options:["All","North","South","East","West"],getOptionLabel:e=>e||"",value:E,color:"#FFFF",onChange:(e,a)=>((e,a)=>{T(""),w(""),V(""),P(""),te(""),ee(""),B(""),_(0),P(""),S(!1),L(a)})(0,a),renderInput:e=>(0,g.jsx)(i.Z,(0,o.Z)((0,o.Z)({},e),{},{placeholder:" Select "}))})]}),"All"!==E&&(0,g.jsxs)(n.ZP,{item:!0,xs:12,md:3.5,lg:3,children:[(0,g.jsxs)(s.Z,{className:"col-12 input-label",children:["State ",(0,g.jsx)("span",{className:"required",children:"*"})]}),(0,g.jsx)(r.Z,{className:"search-select col-12",onFocus:async()=>{try{await m().post("https://countriesnow.space/api/v0.1/countries/states",{country:"india"},{headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((e=>{console.log(e.data.data);var a=e.data.data;J(a.states)})).catch((e=>{console.log("ds",e)}))}catch(e){console.log("failed to fetch state names",e)}},name:"state",getOptionLabel:e=>"string"===typeof e?e:e&&null!==e&&void 0!==e&&e.name?null===e||void 0===e?void 0:e.name:"",options:H,value:$,onChange:(e,a)=>{ee(null===a||void 0===a?void 0:a.name),(async e=>{try{let a={country:"India",state:e};console.log("payloadcitis",a,e),await m().post("https://countriesnow.space/api/v0.1/countries/state/cities",a,{headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((e=>{console.log("res.data",e.data);var a=e.data.data,t=null===a||void 0===a?void 0:a.map((e=>{const a=e.normalize("NFD").replace(/[\u0300-\u036f]/g,"");return"Naini Tal"===a?a.replace(" ",""):a}));X(t)})).catch((e=>{console.log("ds",e)}))}catch(a){console.log("failed to fetch city names",a)}})(null===a||void 0===a?void 0:a.name)},isOptionEqualToValue:(e,a)=>(null===e||void 0===e?void 0:e.name)===a||""===a,renderInput:e=>(0,g.jsx)(i.Z,(0,o.Z)((0,o.Z)({},e),{},{variant:"outlined",placeholder:"State Name"}))})]}),"All"!==E&&(0,g.jsxs)(n.ZP,{item:!0,xs:12,md:3.5,lg:3,children:[(0,g.jsxs)(s.Z,{className:"col-12 input-label",children:["City",(0,g.jsx)("span",{className:"required",children:"*"})]}),(0,g.jsx)(r.Z,{className:"search-select col-12",name:"city",getOptionLabel:e=>"string"===typeof e||e&&e?e:"",options:K,value:ae,onChange:(e,a)=>{te(a)},isOptionEqualToValue:(e,a)=>e===a||""===a,renderInput:e=>(0,g.jsx)(i.Z,(0,o.Z)((0,o.Z)({},e),{},{variant:"outlined",placeholder:"City Name"})),disabled:!$})]}),"All"!==E&&(0,g.jsxs)(n.ZP,{item:!0,xs:12,md:3.5,lg:3,children:[(0,g.jsxs)(s.Z,{className:"col-12 input-label",children:["Choose a BU ",(0,g.jsx)("span",{className:"required",children:"*"})]}),(0,g.jsx)(r.Z,{className:"col-12 search-select",options:Q,getOptionLabel:e=>(null===e||void 0===e?void 0:e.Partner_Name)||"",value:(null===Q||void 0===Q?void 0:Q.find((e=>(null===e||void 0===e?void 0:e.Partner_Name)===q)))||null,onChange:(e,a)=>((e,a)=>{T(""),w(""),V(""),S(!1),_(null===a||void 0===a?void 0:a.id),B(null===a||void 0===a?void 0:a.Partner_Name)})(0,a),renderInput:e=>(0,g.jsx)(i.Z,(0,o.Z)((0,o.Z)({},e),{},{placeholder:"Choose a BU"}))})]}),(0,g.jsxs)(n.ZP,{item:!0,xs:12,md:3.5,lg:3,children:[(0,g.jsxs)(s.Z,{className:"col-12 input-label",children:["Choose a Period",(0,g.jsx)("span",{className:"required",children:"*"})]}),(0,g.jsx)(r.Z,{className:"col-12 search-select",value:F,options:["Previous Week","Previous Month","Previous Quarter","Previous Year","This Week","This Month","This Quarter","This Year","Last One Year","Last Six Month","Last Three Month","Custom Date"],onChange:(e,a)=>{var t,o,l,s,n,r,i,c,d,u,p,v,m,Y,f,x,g;let j,D,y;switch(V(a),P(null),T(""),w(""),a){case"This Week":D=h()().startOf("week"),y=h()().endOf("week");let e=null===(t=D)||void 0===t?void 0:t.format("YYYY-MM-DD"),a=null===(o=y)||void 0===o?void 0:o.format("YYYY-MM-DD");return P(e),z(a),void S(!1);case"This Month":D=h()().startOf("month"),y=h()().endOf("month");let g=null===(l=D)||void 0===l?void 0:l.format("YYYY-MM-DD"),M=null===(s=y)||void 0===s?void 0:s.format("YYYY-MM-DD");return P(g),z(M),void S(!1);case"This Quarter":D=h()().startOf("quarter"),y=h()().endOf("quarter");let Z=null===(n=D)||void 0===n?void 0:n.format("YYYY-MM-DD"),b=null===(r=y)||void 0===r?void 0:r.format("YYYY-MM-DD");return P(Z),z(b),void S(!1);case"This Year":D=h()().startOf("year"),y=h()().endOf("year");let O=null===(i=D)||void 0===i?void 0:i.format("YYYY-MM-DD"),N=null===(c=y)||void 0===c?void 0:c.format("YYYY-MM-DD");return P(O),z(N),void S(!1);case"Previous Week":D=h()().subtract(1,"week").startOf("week"),y=h()().subtract(1,"week").endOf("week");let C=null===(d=D)||void 0===d?void 0:d.format("YYYY-MM-DD"),k=null===(u=y)||void 0===u?void 0:u.format("YYYY-MM-DD");return P(C),z(k),void S(!1);case"Previous Month":D=h()().subtract(1,"month").startOf("month"),y=h()().subtract(1,"month").endOf("month");let T=null===(p=D)||void 0===p?void 0:p.format("YYYY-MM-DD"),A=null===(v=y)||void 0===v?void 0:v.format("YYYY-MM-DD");return P(T),z(A),void S(!1);case"Previous Quarter":D=h()().subtract(1,"quarter").startOf("quarter"),y=h()().subtract(1,"quarter").endOf("quarter");let w=null===(m=D)||void 0===m?void 0:m.format("YYYY-MM-DD"),q=null===(Y=y)||void 0===Y?void 0:Y.format("YYYY-MM-DD");return P(w),z(q),void S(!1);case"Previous Year":D=h()().subtract(1,"year").startOf("year"),y=h()().subtract(1,"year").endOf("year");let B=null===(f=D)||void 0===f?void 0:f.format("YYYY-MM-DD"),I=null===(x=y)||void 0===x?void 0:x.format("YYYY-MM-DD");return P(B),z(I),void S(!1);case"Last One Year":j=h()().subtract(1,"year"),S(!1);break;case"Last Six Month":j=h()().subtract(6,"months"),S(!1);break;case"Last Three Month":j=h()().subtract(3,"months"),S(!1);break;case"Custom Date":S(!0),P("");break;default:j=null}let Z=null===(g=j)||void 0===g?void 0:g.format("YYYY-MM-DD");P(Z),z(M)},renderInput:e=>(0,g.jsx)(i.Z,(0,o.Z)((0,o.Z)({},e),{},{placeholder:"Choose a Period"}))})]}),(0,g.jsxs)(n.ZP,{container:!0,columnSpacing:2,item:!0,md:5,lg:6,style:{display:N?"flex":"none"},children:[(0,g.jsxs)(n.ZP,{item:!0,className:"col-6",children:[(0,g.jsxs)(s.Z,{className:"col-12 input-label",children:["From",(0,g.jsx)("span",{className:"required",children:"*"})]}),(0,g.jsx)(x.O7,{id:"fromDate",name:"fromDate",inputValue:k,handleInputChange:e=>T(e.target.value),variant:"outlined"})]}),(0,g.jsxs)(n.ZP,{item:!0,className:"col-6",children:[(0,g.jsxs)(s.Z,{className:"col-12 input-label",children:["To ",(0,g.jsx)("span",{className:"required",children:"*"})]}),(0,g.jsx)(x.O7,{id:"toDate",name:"toDate",inputValue:A,handleInputChange:e=>w(e.target.value),variant:"outlined",InputProps:{inputProps:{min:k}}})]})]})]}),(0,g.jsx)(d.Z,{sx:{mt:3},children:(0,g.jsxs)(d.Z,{sx:[{p:1}],className:"card",children:[(0,g.jsx)(s.Z,{variant:"h5",sx:{bgcolor:"#ECECEC",padding:"8px",borderRadius:"5px"},children:"Vendor Analysis"}),Boolean(U)?(0,g.jsx)(g.Fragment,{}):(0,g.jsx)(d.Z,{sx:[f,{justifyContent:"center",height:350}],children:(0,g.jsx)(s.Z,{sx:{fontSize:"14px"},children:"No record "})})]})})]})}}}]);
//# sourceMappingURL=780.ab1abc73.chunk.js.map